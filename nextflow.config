includeConfig 'VERSION'

manifest {
    homePage = 'https://github.com/mirnylab/distiller-nf'
    mainScript = 'distiller.nf'
}

process.container = "mirnylab/distiller_env:${version}"
// specify local singularity image when modifying
// distiller_env docker image. Example:
// 1. grab docker and rebuild in a modifiable mode:
// sudo singularity build --sandbox tmp.img docker://mirnylab/distiller_env:${version}
// 2. modify it, e.g. add mounting point /my_new_mount:
// sudo singularity exec --writable tmp.img mkdir /my_new_mount
// 3. rebuild into read-only image for production:
// sudo singularity build production_distiller.img tmp.img
// use process.container = "production_distiller.img" on your cluster.
process.shell = ['/bin/bash', '-uexo','pipefail']


// docker or singularity context is
// described in the scope of profiles
profiles {


    standard {
        includeConfig './configs/local.config'
    }


    cluster {
        includeConfig './configs/cluster.config'
    }

}


// Use 'params' to provide parameters
// accessible inside the main script
// distiller.nf
params {
    // internal compression format (gz, lz4, ...)
    // used for storing intermediate results
    compression_format = 'gz'

}


timeline {
    enabled = true
}

trace {
    enabled = true
}

report {
    enabled = true
}
