includeConfig 'VERSION'

manifest {
    homePage = 'https://github.com/mirnylab/distiller-nf'
    mainScript = 'distiller.nf'
}

process.container = "mirnylab/distiller_env:${version}"
process.shell = ['/bin/bash', '-uexo','pipefail']


profiles {


    standard {
        includeConfig './configs/local.config'
    }


    cluster {
        includeConfig './configs/cluster.config'
    }

}

// docker context is now described in the
// scope of profiles


// Use 'params' to fine tune
// cpu requirements for different
// scipts inside a process, for example:
// set npzipin to 2 for all processes
// as pbgzip does not scale further
// for decompression.
// Use process scope to define a node config
// in the LSF submission system.
// Nice way of separating the two things ...
// NOT USED IN A CURRENT VERSION AT ALL
params {
    fastqc_cpus = 4
    chunk_cpus = 8
    map_cpus = 8
    merge_cpus = 8
    parse_cpus = 8
    filter_make_pairs_cpus = 8
    bin_cpus = 20
}


timeline {
    enabled = true
}

trace {
    enabled = true
}

